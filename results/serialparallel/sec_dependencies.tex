\section{Dependencies}
\label{sec:dependencies}

\subsection{Unknown Dependencies}
We now give an on-line scheduling algorithm in
Algorithm~\ref{alg:aug}, which we call \defn{AUG}, that is
$O(\sqrt{p})$-competitive with the optimal off-line scheduling
algorithm for the problem where there are unknown dependencies
among the tasks.
Recalling the $\Omega(\sqrt{p})$ lower bound on such an
algorithm's competitive ratio, we have that our scheduler is
asymptotically optimal in this situation.

\begin{algorithm}
  \caption{AUG}
  \label{alg:aug}
  \begin{algorithmic}
    \State $A = \{\rho_1, \rho_2, \ldots, \rho_{p/2} \}$
    \State $B = \{\rho_{1+p/2}, \rho_{2+p/2}, \ldots, \rho_{p} \}$
    \State
    \State $\mathcal{T} \gets$ arrived tasks that haven't been scheduled yet
    \State $\mathcal{T}_A \gets \{ \tau \in \mathcal{T} | \pi(\tau) \le \sqrt{p} \cdot \sigma(\tau) \}.$
    \State $\mathcal{T}_B \gets \{ \tau\in \mathcal{T}  | \pi(\tau) > \sqrt{p} \cdot \sigma(\tau) \}.$
    \State
    
    \If{$B$ has no tasks running}
      \State Sequentially greedily schedule all tasks $\tau \in \mathcal{T}_B$ on processors in $B$
    \EndIf
    \State Schedule all tasks $\tau \in \mathcal{T}_A$ in parallel on all processors in $A$

  \end{algorithmic}
\end{algorithm}

We will show that AUG with $p$ processors is $O(1)$-competitive
with OPT on $\sqrt{p}$ processors, which we refer to as
\defn{SmallOPT}. We define the \defn{AUG-$X$
awake time}, for $X=A,B$, to be the amount of time that $X$ has
unfinished tasks; we will show that AUG-$X$ awake time is
constant-competitive with SmallOPT's awake time for $X=A,B$.

First consider $X=A$. Recall that $A$ gets tasks with cost ratio
at most $\sqrt{p}$. SmallOPT can run these tasks in serial or in
parallel. AUG runs these tasks in parallel on all processors in
$A$. For a task $\tau$, the time it takes AUG to run the task is
$\pi(\tau)/(p/2) < \sigma(\tau)/ (\sqrt{p}/2)$. The AUG-$A$ awake
time is 
$$\sum_{\tau \in \mathcal{T}_A} \frac{\pi(\tau)}{p/2} \le \sum_{\tau \in \mathcal{T}_A} \frac{\sigma(\tau)}{\sqrt{p}/2}$$
where $\mathcal{T}_A$ denotes the set of tasks with cost ratio at most $\sqrt{p}$.
On the other hand, the awake time of SmallOPT is trivially at least 
$$\sum_{\tau} \frac{\sigma(\tau)}{\sqrt{p}}.$$
So AUG-$A$ awake time is constant-competitive with SmallOPT's awake time.

Now consider $X=B$. Recall that $B$ gets tasks with cost ratio
larger than $\sqrt{p}$. SmallOPT must run these tasks in serial,
and CHUNK chooses to run these tasks in serial as well, in
particular on processors in $B$. Without loss of generality we
restrict to considering DTAPs that consist only of tasks with
cost ratio larger than least $\sqrt{p}$; considering DTAPs with
other tasks increases SmallOPT's awake time without affecting
CHUNK-$B$ awake time. We claim that by scheduling tasks greedily
in batches AUG-$B$ awake time is $4$-competitive with SmallOPT's
awake time. We define a \defn{$B$ start time} to be a time when
$B$ has no work and there are tasks that have already arrived
with cost ratio larger than $\sqrt{p}$ that $B$ is about to
schedule. We define a \defn{$B$ finish time} to be a time when
$B$ finishes a batch of tasks. Note that $B$ finish times and $B$
start times certainly can coincide. Let $T_t^{start}$ denote the
difference between the $t$-th finish time and the $t$-th start
time, i.e. the amount of time that greedy bin-packing takes to
process the $t$-th batch of tasks. Let $T_t^{during}$ denote the
amount of time that greedy bin-packing takes to process the tasks
that arrived between the $t$-th start time and the $t$-th finish
time. Clearly AUG-$B$ awake time is at most 
$$\sum_{t} \left(T_t^{start} + T_t^{during}\right).$$
On the other hand, greedy bin-packing is $2$-competitive with OPT
for serial batches, so SmallOPT's awake time is at least 
$$\sum_{t} \max(T_t^{start}/2, T_t^{during}/2).$$
Hence AUG-$B$ awake time is $4$-competitive with SmallOPT's awake time.

But of course AUG's awake time is at most the sum of AUG-$A$
awake time and AUG-$B$ awake time. So AUG's awake time is
constant-competitive with SmallOPT's awake time.

SmallOPT is $(\sqrt{p})$-competitive with OPT since SmallOPT
could just use $\sqrt{p}$ steps to simulate a step of OPT. Thus,
because AUG is constant-competitive with SmallOPT, AUG is
$O(\sqrt{p})$-competitive with OPT. 

\subsection{Known Dependencies}
Now we consider the off-line version of the dependency version of
the scheduling problem. In particular, in this version of the
problem the scheduler has full knowledge of all the specs of all
the tasks and all the dependencies.

We give an algorithm to constant-approximate the optimal off-line
scheduler in reasonable running time.

